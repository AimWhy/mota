init:
  - name: pkginfo

dev:
  - name: clean
    target: ./dist/
  - name: copy 
    files:
      ./dist/(0).html: ./assets/*.html
  - name: shell
    async: true
    script:
      - rollup -w -c ./rollup.config.dev.js
  - name: server
    public: ./dist/
    port: 6008

build:
  - name: clean
    target: 
      - ./dist/
  - name: ./scripts/info.js
  - name: file-header
    text: 
      - 'Copyright (c) 2015-present Houfeng'
      - '@homepage https://github.com/Houfeng/mota'
      - '@author Houfeng <admin@xhou.net>'
  - name: shell
    script:
      - tsc --locale zh-CN 
      - rollup -c
  - name: copy
    files:
      ./docs/logo.jpg: ./design/logo.jpg

# test:
#   - name: lint
#   - name: unit
#     type: typescript
#     files: ./test/**/*.ts

publish:
  - name: version
  - name: shell
    script:
      - dn test
      - dn build
      - npm pu --registry=http://registry.npmjs.org/ --tag alpha
  - name: submitter
